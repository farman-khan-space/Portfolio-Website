@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* --- Theme 7: "Kyoto Ink" (Sharp & Minimalist) --- */
  [data-theme='kyoto-ink'] {
    /* Colors */
    --color-background: 247 247 247;
    --color-foreground: 12 10 9;
    --color-foreground-muted: 87 83 78;
    --color-primary: 185 28 28;
    --color-accent: 240 240 238;
    /* Shapes */
    --radius-default: 0.25rem;
    --radius-lg: 0.375rem;
    /* Fonts */
    --font-heading: 'Poppins', sans-serif;
    --font-body: 'Inter', sans-serif;
    /* Animations */
    --transition-speed: 150ms;
  }

  [data-theme='kyoto-ink'].dark {
    --color-background: 23 24 28;
    --color-foreground: 231 231 226;
    --color-foreground-muted: 130 130 125;
    --color-primary: 220 38 38;
    --color-accent: 33 35 40;
  }
}

@layer components {
  /* Reusable component for navigation links with an animated underline */
  .nav-link {
    @apply relative text-foreground-muted transition-colors duration-theme hover:text-foreground;
  }
  .nav-link::after {
    @apply absolute -bottom-1 left-0 h-[2px] w-full origin-left scale-x-0 bg-primary transition-transform duration-theme ease-out;
    content: '';
  }
  .nav-link:hover::after {
    @apply scale-x-100 ;
  }
  div[class*="language-"] {
    position: relative;
  }

  .eleventy-plugin-syntaxhighlight-copy-button {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    padding: 0.25rem 0.5rem;
    background-color: rgb(var(--color-accent));
    color: rgb(var(--color-foreground));
    border: 1px solid rgb(var(--color-foreground) / 0.2);
    border-radius: 0.375rem;
    font-family: var(--font-body);
    font-size: 0.8rem;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
  }

  div[class*="language-"]:hover .eleventy-plugin-syntaxhighlight-copy-button {
    opacity: 1;
  }

  .card-glass {
    @apply relative isolate overflow-hidden;
  }

  .card-glass::before {
    content: '';
    @apply absolute inset-0 z-[-1];
    background-size: cover;
    background-position: center;
    transform: scale(1.1);
    
    /* --- LIGHT MODE GRADIENT --- */
    background-image: radial-gradient(circle, #F5F5F4, #F7F7F7, #f7f6f6); 
  }

  .dark .card-glass::before {
    /* --- DARK MODE GRADIENT --- */
    background-image: radial-gradient(circle, #212328, #17181C);
  }

  /* OPTION 1: Subtle Noise */
  .card-glass.bg-noise::before {
    /* Encoded Black noise for light mode */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.4' fill='black'/%3E%3C/svg%3E");
  }

  .dark .card-glass.bg-noise::before {
    /* Encoded White noise for dark mode */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.1' fill='white'/%3E%3C/svg%3E");
  }
  
  .skill-pill {
    @apply inline-block bg-accent text-primary font-medium text-sm py-2 px-4 rounded-full border border-primary/20 transition-transform duration-200;
  }
  
  .skill-pill:hover {
    @apply -translate-y-0.5;
  }
  
  /* --- NEW: Skip to Content Link --- */
  .skip-link {
    @apply sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 z-[999] bg-foreground text-background px-4 py-2 rounded-md shadow-lg;
  }

  /* --- NEW: Reading Progress Bar --- */
  .progress-bar {
    @apply fixed top-0 left-0 h-1 bg-primary z-[60] transition-all duration-100 ease-linear;
  }
  
  header {
    @apply border-transparent transition-all duration-700 ease-in-out; 
  }

  header.scrolled {
    @apply border-b border-primary/20 bg-background/65 dark:bg-background/65 shadow-2xl;
  }

  /* --- CORRECTED: Flip Card Animation --- */
  .flip-card {
    background-color: transparent;
    perspective: 1000px; /* Set 3D perspective */
    min-height: 450px; /* Adjust this height to match your card content */
  }

  .flip-card-inner {
    @apply relative w-full h-full text-center;
    transform-style: preserve-3d;
    transition: transform 0.6s; /* SMOOTHER DURATION */
    transition-timing-function: ease-in-out; /* SMOOTHER EASING */
  }

  /* Use a group-hover for the animation trigger */
  .group:hover .flip-card-inner {
    transform: rotateY(180deg);
  }

  .flip-card-front, .flip-card-back {
    @apply absolute w-full h-full;
    -webkit-backface-visibility: hidden; /* Safari */
    backface-visibility: hidden;
  }

  .flip-card-back {
    transform: rotateY(180deg);
  }
}

